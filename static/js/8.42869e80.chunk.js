(this.webpackJsonpadmin_cni=this.webpackJsonpadmin_cni||[]).push([[8],{592:function(e,t,a){"use strict";var s=a(13),n=a(14),c=a(16),i=a.n(c),r="http://202.158.64.238//api_cni/index.php",o=function(){function e(){Object(s.a)(this,e)}return Object(n.a)(e,[{key:"postData",value:function(e,t){switch(t){case"GET_DATA":return i.a.post(r+"/product",e);case"ADD_DATA":return i.a.post(r+"/simpan_product",e);case"VIEW_DETAIL":return i.a.post(r+"/product_detail",e);case"GET_IMAGE":return i.a.post(r+"/product_img",e);case"UPLOAD_IMAGE":return i.a.post(r+"/upl_img_prod",e);case"DEL_IMAGE":return i.a.post(r+"/del_img_prod",e);case"DELETE_DATA":return i.a.post(r+"/del_product",e);case"GET_PRODUCT":return r+="/product/?per_page="+e.per_page+"&page_number="+e.page_number+"&keyword="+e.keyword,i.a.get(r+e);default:return i.a.post(r+"/product",e)}}}]),e}();t.a=new o},606:function(e,t,a){"use strict";a.r(t);var s=a(3),n=a(17),c=a.n(n),i=a(23),r=a(13),o=a(14),d=a(36),l=a(26),p=a(27),u=a(21),h=a(1),j=a(590),m=a(607),g=a(609),b=a(177),O=a(277),f=a(594),x=a(25),_=a(602),v=a(592),D=a(31),I=a(2),N=new f.a,w=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).getData=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.get("imageIdCNI"),a={id_product:t},s.setState(a),e.next=5,v.a.postData(a,"GET_IMAGE").then((function(e){if("00"===e.data.err_code){var t=e.data.data;s.setState({dtImg:t})}"04"===e.data.err_code&&s.setState({isLoading:!1})})).catch((function(e){console.log(e),s.setState({isLoading:!1})}));case 5:s.setState({loadingPage:!1});case 6:case"end":return e.stop()}}),e)}))),s.getDataProduct=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.get("imageIdCNI"),a={id_product:t},e.next=4,v.a.postData(a,"VIEW_DETAIL").then((function(e){if("00"===e.data.err_code){var t=e.data.data;s.setState({product_name:t.product_name})}"04"===e.data.err_code&&console.log(e.data.data)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)}))),s.state={loadingPage:!0,isLoading:!1,deleteForm:!1,showSwalSuccess:!1,id:"",selectedImg:"",id_product:"",id_operator:"",product_name:"",dtImg:[],fileNames:[]},s.handleDrop=s.handleDrop.bind(Object(d.a)(s)),s.deleteImg=s.deleteImg.bind(Object(d.a)(s)),s.handleClose=s.handleClose.bind(Object(d.a)(s)),s.handleDelete=s.handleDelete.bind(Object(d.a)(s)),s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.getDataProduct(),e.getData()}),300)}},{key:"deleteImg",value:function(e){this.setState(Object(s.a)(Object(s.a)({},this.state),{},{selectedImg:e.img,id_operator:this.props.user.id_operator,id:e.id,isLoading:!1,deleteForm:!0}))}},{key:"handleDelete",value:function(){var e=this;this.setState(Object(s.a)(Object(s.a)({},this.state),{},{isLoading:!0})),v.a.postData(this.state,"DEL_IMAGE").then((function(t){"00"===t.data.err_code?(e.setState(Object(s.a)(Object(s.a)({},e.state),{},{showSwalSuccess:!0,deleteForm:!1})),setTimeout((function(){e.setState(Object(s.a)(Object(s.a)({},e.state),{},{isLoading:!1})),e.getData()}),300)):console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"handleClose",value:function(){this.setState({isLoading:!1,deleteForm:!1})}},{key:"handleDrop",value:function(e,t){var a=this;this.setState({id_operator:this.props.user.id_operator});var s=new FormData;e.map((function(e){return s.append("img[]",e),!0})),s.append("id_operator",this.state.id_operator),s.append("id_product",this.state.id_product),v.a.postData(s,"UPLOAD_IMAGE").then((function(e){a.setState({loadingPage:!0}),"00"===e.data.err_code?a.getData():console.log(e.data)})).catch((function(e){console.log(e)}));var n=t.map((function(e){var t=[];return e.errors.map((function(e){return"file-too-large"===e.code?t.push("File is larger than 2MB"):t.push(e.message),1})),{fileName:e.file.name,errors:t.join(" and ")}}));this.setState({fileNames:n})}},{key:"render",value:function(){var e=this,t=Object(I.jsxs)(j.a,{children:[Object(I.jsx)(j.a.Image,{thumbnail:!0,className:"modal-img",width:171,height:180,alt:"",style:{maxHeight:"180px"},src:this.state.selectedImg}),Object(I.jsxs)(j.a.Caption,{id:"caption",children:["Apakah anda yakin ",Object(I.jsx)("br",{}),"akan menghapus data ini ?"]})]});return Object(I.jsxs)("div",{children:[Object(I.jsxs)("div",{className:"content-wrapper",children:[Object(I.jsx)("div",{className:"content-header",children:Object(I.jsx)("div",{className:"container-fluid",children:Object(I.jsx)("div",{className:"row mb-2",children:Object(I.jsx)("div",{className:"col-sm-6",children:Object(I.jsx)("h1",{className:"m-0",children:"List Image"})})})})}),Object(I.jsx)("section",{className:"content",children:Object(I.jsx)("div",{className:"container-fluid",children:Object(I.jsx)("div",{className:"row",children:Object(I.jsx)("div",{className:"col-12",children:Object(I.jsxs)("div",{className:"card shadow-lg",children:[Object(I.jsx)("div",{className:"card-header",children:Object(I.jsx)("h4",{className:"m-0",children:this.state.product_name})}),Object(I.jsxs)("div",{className:"card-body my-card-body",children:[Object(I.jsx)(_.a,{onDrop:this.handleDrop,accept:"image/jpeg, image/png, image/jpg",maxSize:5242880,children:function(e){var t=e.isDragActive,a=e.isDragReject,n=e.getRootProps,c=e.getInputProps;return Object(I.jsxs)("div",Object(s.a)(Object(s.a)({},n({className:"dropzone"})),{},{children:[Object(I.jsx)("input",Object(s.a)({},c())),Object(I.jsx)("br",{}),!t&&Object(I.jsx)("p",{style:{fontWeight:"600"},children:"Drag & drop files, or click to select files"}),a&&Object(I.jsx)("p",{style:{color:"red",fontWeight:"800"},children:"File not accepted, sorry!"}),t&&!a&&Object(I.jsx)("p",{style:{color:"lightgreen",fontWeight:"800"},children:"Drop it like it's hot!"}),Object(I.jsx)("em",{children:"(Only *.jpg, *.jpeg, *.png Images and Maks. size 2MB will be accepted)"})]}))}}),this.state.fileNames.length>0?Object(I.jsxs)(m.a,{variant:"danger",onClose:function(){return e.setState({fileNames:[]})},dismissible:!0,children:[Object(I.jsx)(m.a.Heading,{children:"You got an error!"}),Object(I.jsx)(g.a,{variant:"flush",children:this.state.fileNames.map((function(e){return Object(I.jsxs)(g.a.Item,{style:{backgroundColor:"transparent",paddingBottom:"4px",paddingTop:"4px"},children:["- ",e.fileName+" : "+e.errors]},e.fileName)}))})]}):"",this.state.dtImg.map((function(t){return Object(I.jsxs)(j.a,{className:"img-product-pic",style:{marginRight:"10px",marginLeft:"5px"},children:[Object(I.jsx)(b.a,{src:t.img,thumbnail:!0,width:170,height:180,style:{maxHeight:"180px"}}),Object(I.jsx)("span",{onClick:function(){return e.deleteImg(t)},className:"remove-image",children:"x"})]},t.id)}))]}),Object(I.jsx)("div",{className:"card-footer",children:Object(I.jsx)(x.b,{to:"/products",children:Object(I.jsx)(O.a,{variant:"danger",children:"Cancel"})})})]})})})})}),Object(I.jsx)(D.a,{show:this.state.deleteForm,size:"sm",form:t,handleClose:this.handleClose,backdrop:"static",keyboard:!1,title:"Delete Image",titleButton:"Delete Image",themeButton:"danger",isLoading:this.state.isLoading,formSubmit:this.handleDelete})]}),Object(I.jsx)("div",{})]})}}]),a}(h.Component);t.default=Object(u.b)((function(e){return{user:e.auth.currentUser}}),"")(w)}}]);